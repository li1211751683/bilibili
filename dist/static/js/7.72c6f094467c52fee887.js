webpackJsonp([7],{EE2l:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a),s=n("exGp"),o=n.n(s),i=n("DIWV"),c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{on:{click:this.bannerClick}},[e("div",{staticClass:"editbanner"},[e("span",[this._v(this._s(this.left))]),this._v(" "),e("span",[this._t("right")],2)])])},staticRenderFns:[]};var l=n("VU/8")({props:["left"],methods:{bannerClick:function(){this.$emit("bannerClick")}}},c,!1,function(t){n("JN5v")},null,null).exports,d={components:{NavBar:i.a,editBanner:l},data:function(){return{model:{},show:!1,content:"",textshow:!1,gendershow:!1,actions:[{name:"男",val:1},{name:"女",val:0}]}},created:function(){this.selectUser()},methods:{selectUser:function(){var t=this;return o()(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/user/"+localStorage.getItem("id"));case 2:n=e.sent,t.model=n.data[0];case 4:case"end":return e.stop()}},e,t)}))()},afterRead:function(t){var e=this;return o()(r.a.mark(function n(){var a,s;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(a=new FormData).append("file",t.file),n.next=4,e.$http.post("/upload",a);case 4:s=n.sent,e.model.user_img=s.data.url,e.UserUpdate(),e.$refs.navbar.NavInit();case 8:case"end":return n.stop()}},n,e)}))()},UserUpdate:function(){var t=this;return o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("/update/"+localStorage.getItem("id"),t.model);case 2:200==e.sent.data.code&&t.$msg.fail("修改成功");case 4:case"end":return e.stop()}},e,t)}))()},confirmClick:function(){this.model.name=this.content,this.UserUpdate(),this.content=""},textareaClick:function(){this.model.user_desc=this.content,this.UserUpdate(),this.content=""},onSelect:function(t){this.model.gender=t.val,this.UserUpdate(),this.gendershow=!1}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"2.778vw"}},[a("nav-bar",{ref:"navbar"})],1),t._v(" "),a("div",{staticClass:"uploadfile"},[a("div",{staticClass:"uploadimg"},[a("van-uploader",{attrs:{"preview-size":"100vw","after-read":t.afterRead}})],1),t._v(" "),a("edit-banner",{attrs:{left:"头像"}},[t.model.user_img?a("img",{attrs:{slot:"right",src:t.model.user_img,alt:""},slot:"right"}):a("img",{attrs:{slot:"right",src:n("p2pt"),alt:""},slot:"right"})])],1),t._v(" "),a("edit-banner",{attrs:{left:"昵称"},on:{bannerClick:function(e){t.show=!0}}},[a("a",{attrs:{slot:"right",href:"javascript:;"},slot:"right"},[t._v(t._s(t.model.name))])]),t._v(" "),a("edit-banner",{attrs:{left:"账号"}},[a("a",{attrs:{slot:"right",href:"javascript:;"},slot:"right"},[t._v(t._s(t.model.username))])]),t._v(" "),a("edit-banner",{attrs:{left:"性别"},on:{bannerClick:function(e){t.gendershow=!0}}},[a("a",{attrs:{slot:"right",href:"javascript:;"},slot:"right"},[t._v(t._s(t.model.gender?"男":"女"))])]),t._v(" "),a("edit-banner",{attrs:{left:"个签"},on:{bannerClick:function(e){t.textshow=!0}}}),t._v(" "),a("van-dialog",{attrs:{title:"昵称","show-cancel-button":""},on:{confirm:t.confirmClick,cancel:function(e){t.content=""}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("van-field",{attrs:{type:"textarea",autofocus:""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),a("van-dialog",{attrs:{title:"个签","show-cancel-button":""},on:{confirm:t.textareaClick,cancel:function(e){t.content=""}},model:{value:t.textshow,callback:function(e){t.textshow=e},expression:"textshow"}},[a("van-field",{attrs:{type:"textarea",autofocus:""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),a("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消"},on:{select:t.onSelect},model:{value:t.gendershow,callback:function(e){t.gendershow=e},expression:"gendershow"}}),t._v(" "),a("div",{staticClass:"editback",on:{click:function(e){return t.$router.back()}}},[t._v("返回个人中心")])],1)},staticRenderFns:[]};var f=n("VU/8")(d,u,!1,function(t){n("TapN")},"data-v-30116a05",null);e.default=f.exports},JN5v:function(t,e){},TapN:function(t,e){}});
//# sourceMappingURL=7.72c6f094467c52fee887.js.map